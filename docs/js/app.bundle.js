"use strict";var app=angular.module("myApp",["ngRoute","ngSanitize","myApp.calc","myApp.about","myApp.version"]);function elevation(t){return{getElevation:function(e,r){const n="https://api.open-elevation.com/api/v1/lookup?locations="+e+","+r;return t.get(n).then(function(t){return t.data}).catch(function(t){var e='<div class="alert alert-danger">\n  <strong>Error</strong> XHR Failed for '+n+"."+t.data+"\n</div>";$("#messages").append(e)})}}}function weather(t){return{getWeather:function(e,r){const n="http://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+r+"&APPID=133cb745ed32ad0dbf2284df34a28987";return t.get(n).then(function(t){return t.data}).catch(function(t){var e='<div class="alert alert-danger">\n  <strong>Error</strong> XHR Failed for '+n+"."+t.data+"\n</div>";$("#messages").append(e)})}}}app.config(["$locationProvider","$routeProvider",function(t,e){t.hashPrefix("!"),e.otherwise({redirectTo:"/calc"})}]).factory("elevation",elevation).factory("weather",weather),elevation.$inject=["$http"],weather.$inject=["$http"],angular.module("myApp.calc").factory("ipLocationService",["$http",function(t){return{getLocation:function(){return t.get("http://ip-api.com/json").then(function(t){return t})}}}]),angular.module("myApp.calc",["ngRoute"]).config(["$routeProvider",function(t){t.when("/calc",{templateUrl:"views/calc.html",controller:"CalcCtrl"})}]).controller("CalcCtrl",["$scope","ipLocationService","elevation","weather",function(t,e,r,n){t.dac={elevation:0,air_temperature:0,barometric_pressure:0,relative_humidity:0,density_altitude:"n/a",relative_density:"n/a",location_name:"&nbsp;"};function a(t,e){if(e>0){if(t.toString().length-t.toString().lastIndexOf(".")>e+1){var r=Math.pow(10,e);return Math.round(t*r)/r}return t}return Math.round(t)}t.calculate=function(){var e,r,n,o;e=1*t.dac.elevation,r=1*t.dac.barometric_pressure,o=1.8*(n=1*t.dac.air_temperature-273.15)+32;let i=1*t.dac.relative_humidity;var l,c;let s=(c=.99999683+(l=n)*(l*(78736169e-12+l*(l*(4.3884187e-9+l*(l*(2.1874425e-13+l*(l*(1.1112018e-17+-3.0994571e-20*l)-1.7892321e-15))-2.9883885e-11))-6.1117958e-7))-.0090826951),6.1078/Math.pow(c,8))*i/100;var u,p,d,g,v,h,m=function(t){var e=6369e3;return e*t/(e+t)}(e),f=(u=r,p=m,Math.pow(Math.pow(u,.190263)-8417286e-11*p,1/.190263)),y=function(t,e,r){var n=r+273.15;return 100*e/(461.4964*n)+100*(t-e)/(287.0531*n)}(f,s,n),w=y/1.225*100,b=function(t){var e=6369e3;return e*t/(e-t)}((d=8.31432,g=28.9644,v=1e3*y,h=.23496924566952423*Math.log(288.15*d*v/(101325*g)),-288.15/6.5*(Math.exp(h)-1)*1e3)),A=f*(1/33.86389),_=b*(1/.3048);if(_>36090||_<-15e3){var M='<div class="alert alert-danger">\n  <strong>Error</strong> '+("Out of range for Troposhere Algorithm: Altitude ="+a(_,0)+" feet\nPlease check your input values.")+"\n</div>";$("#messages").append(M)}else{var P=100*a(145442.16*(1-Math.pow(17.326*A/(o+459.67),.235))/100),C={};C.densaltz=a(_,0),C.densaltzm=a(b,0),C.actpress=a(A,3),C.actpressmb=a(f,2),C.density_m=a(y,3),C.density_e=a(.062428*y,4),t.dac.relative_density=a(w,2),t.dac.density_altitude=P,C.awosm=a(.3048*P,0)}},e.getLocation().then(function(e){return $("#progress-bar").html("Loading location..."),t.location={lat:e.data.lat,lng:e.data.lon,city:e.data.city,zip:e.data.zip},$("#progress-bar").css({width:"25%"}),e}).then(function(){$("#progress-bar").html("Loading elevation..."),t.location&&r.getElevation(t.location.lat,t.location.lng).then(function(e){return t.dac.elevation=e.results[0].elevation,$("#progress-bar").css({width:"50%"}),e})}).then(function(){t.location&&($("#progress-bar").html("Loading weather..."),n.getWeather(t.location.lat,t.location.lng).then(function(e){return t.dac.air_temperature=e.main.temp,t.dac.barometric_pressure=e.main.pressure,t.dac.relative_humidity=e.main.humidity,t.dac.location_name=e.name,$("#progress-bar").css({width:"75%"}),e}))}).then(function(){$("#progress-bar").html("Calculating..."),$("#progress-bar").css({width:"75%"}),t.calculate()}).catch(function(t){var e='<div class="alert alert-danger">\n  <strong>Error '+t.status+"</strong> "+t.statusText+"\n</div>";$("#messages").append(e)}).finally(function(){$("#progress-bar").css({width:"100%"}),$("#loading, #loading-overlay").hide()})}]),angular.module("myApp.about",["ngRoute"]).config(["$routeProvider",function(t){t.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"})}]).controller("AboutCtrl",[function(){}]),angular.module("myApp.version",["myApp.version.interpolate-filter","myApp.version.version-directive"]).value("version","0.1"),angular.module("myApp.version.version-directive",[]).directive("appVersion",["version",function(t){return function(e,r,n){r.text(t)}}]),angular.module("myApp.version.interpolate-filter",[]).filter("interpolate",["version",function(t){return function(e){return String(e).replace(/\%VERSION\%/gm,t)}}]);