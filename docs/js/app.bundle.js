"use strict";var app=angular.module("myApp",["ngRoute","ngSanitize","geolocation","myApp.calc","myApp.about","myApp.version"]);app.config(["$locationProvider","$routeProvider",function(e,t){e.hashPrefix("!"),t.otherwise({redirectTo:"/calc"})}]),app.factory("browserLocationService",["geolocation",function(e){return{getLocation:function(){return e.getLocation().then(function(e){return{lat:e.coords.latitude,lng:e.coords.longitude,elevation:e.coords.altitude}})}}}]),app.factory("ipLocationService",["$http",function(e){return{getLocation:function(){return e.get("https://extreme-ip-lookup.com/json/").then(function(e){return{lat:e.data.lat,lng:e.data.lon,zip:e.data.zip,location_name:e.data.city+", "+e.data.region}})}}}]),app.factory("weatherService",["$http",function(e){return{getWeather:function(t,n){const r="https://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+n+"&APPID=133cb745ed32ad0dbf2284df34a28987";return e.get(r).then(function(e){return{air_temperature:e.data.main.temp,barometric_pressure:e.data.main.pressure,relative_humidity:e.data.main.humidity,location_name:e.data.name}})}}}]),app.factory("elevationService",["$http",function(e){return{getElevation:function(t,n){const r="https://api.open-elevation.com/api/v1/lookup?locations="+t+","+n;return e.get(r).then(function(e){return e.data.results[0].elevation})}}}]),app.factory("calculationService",[function(){return{calculate:function(e){var t,n,r,a;t=1*e.elevation,n=1*e.barometric_pressure,a=1.8*(r=1*e.air_temperature-273.15)+32;let o=1*e.relative_humidity;var i,l;let c=(l=.99999683+(i=r)*(i*(78736169e-12+i*(i*(4.3884187e-9+i*(i*(2.1874425e-13+i*(i*(1.1112018e-17+-3.0994571e-20*i)-1.7892321e-15))-2.9883885e-11))-6.1117958e-7))-.0090826951),6.1078/Math.pow(l,8))*o/100;var u,p,s,v,d,m,f=function(e){var t=6369e3;return t*e/(t+e)}(t),g=(u=n,p=f,Math.pow(Math.pow(u,.190263)-8417286e-11*p,1/.190263)),h=function(e,t,n){var r=n+273.15;return 100*t/(461.4964*r)+100*(e-t)/(287.0531*r)}(g,c,r),y=h/1.225*100,_=g*(1/33.86389),w=function(e){var t=6369e3;return t*e/(t-e)}((s=8.31432,v=28.9644,d=1e3*h,m=.23496924566952423*Math.log(288.15*s*d/(101325*v)),-288.15/6.5*(Math.exp(m)-1)*1e3))*(1/.3048);if(!(w>36090||w<-15e3)){var b=145442.16*(1-Math.pow(17.326*_/(a+459.67),.235))/100*100;return{relative_density:y,density_altitude:b}}var A='<div class="alert alert-danger">\n  <strong>Error</strong> '+("Out of range for Troposhere Algorithm: Altitude ="+w+" feet\nPlease check your input values.")+"\n</div>";$("#messages").append(A)}}}]),angular.module("myApp.calc",["ngRoute"]).config(["$routeProvider",function(e){e.when("/calc",{templateUrl:"views/calc.html",controller:"CalcCtrl"})}]).controller("CalcCtrl",["$scope","$q","browserLocationService","ipLocationService","elevationService","weatherService","calculationService",function(e,t,n,r,a,o,i){e.weather={air_temperature:0,barometric_pressure:0,relative_humidity:0,location_name:"&nbsp;"},e.dac={density_altitude:"n/a",relative_density:"n/a"},e.location={lat:0,lng:0,elevation:0};var l=n.getLocation().then(function(n){return n||t.all([r.getLocation(),a.getElevation(e.location.lat,e.location.lng)]).then(function(t){e.location=t[0],e.elevation=t[1]}),n}).then(function(t){e.location=t}),c=t.all([l]).then(function(){return o.getWeather(e.location.lat,e.location.lng).then(function(t){e.weather=t})});t.all([l,c]).then(function(){var t={elevation:e.location.elevation,barometric_pressure:e.weather.barometric_pressure,air_temperature:e.weather.air_temperature,relative_humidity:e.weather.relative_humidity};e.dac=i.calculate(t)}).catch(function(e){var t='<div class="alert alert-danger">\n  <strong>Error:</strong> '+e.message+"\n</div>";$("#messages").append(t)}).finally(function(){$("#loading, #loading-overlay").hide()})}]),angular.module("myApp.about",["ngRoute"]).config(["$routeProvider",function(e){e.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"})}]).controller("AboutCtrl",[function(){}]),angular.module("myApp.version",["myApp.version.interpolate-filter","myApp.version.version-directive"]).value("version","0.1"),angular.module("myApp.version.version-directive",[]).directive("appVersion",["version",function(e){return function(t,n,r){n.text(e)}}]),angular.module("myApp.version.interpolate-filter",[]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/gm,e)}}]);